{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport { generateGrid } from '../utils/gridGenerator';\nimport { hasValidPath, canMatch } from '../utils/pathValidator';\nimport { LEVELS, INITIAL_VISIBLE_ROWS, POINTS_PER_MATCH, ROWS_TO_ADD } from '../utils/constants';\nexport const useGameLogic = level => {\n  _s();\n  const [grid, setGrid] = useState([]);\n  const [selectedCell, setSelectedCell] = useState(null);\n  const [matchedCells, setMatchedCells] = useState(new Set());\n  const [score, setScore] = useState(0);\n  const [shake, setShake] = useState(null);\n  const [visibleRows, setVisibleRows] = useState(INITIAL_VISIBLE_ROWS);\n  useEffect(() => {\n    const config = LEVELS[level];\n    setGrid(generateGrid(config));\n    setMatchedCells(new Set());\n    setSelectedCell(null);\n    setScore(0);\n    setVisibleRows(INITIAL_VISIBLE_ROWS);\n  }, [level]);\n  useEffect(() => {\n    var _grid$;\n    if (matchedCells.size === grid.length * ((_grid$ = grid[0]) === null || _grid$ === void 0 ? void 0 : _grid$.length) && grid.length > 0) {\n      return true; // Level won\n    }\n  }, [matchedCells, grid]);\n  const handleCellClick = (row, col, value) => {\n    if (matchedCells.has(`${row}-${col}`)) return;\n    if (row >= visibleRows) return;\n    const cellKey = `${row}-${col}`;\n    if (!selectedCell) {\n      setSelectedCell({\n        row,\n        col,\n        value\n      });\n    } else {\n      if (selectedCell.row === row && selectedCell.col === col) {\n        setSelectedCell(null);\n        return;\n      }\n      if (canMatch(selectedCell.value, value) && hasValidPath(selectedCell, {\n        row,\n        col\n      }, matchedCells, visibleRows, grid[0].length)) {\n        const newMatched = new Set(matchedCells);\n        newMatched.add(`${selectedCell.row}-${selectedCell.col}`);\n        newMatched.add(cellKey);\n        setMatchedCells(newMatched);\n        setScore(score + POINTS_PER_MATCH);\n        setSelectedCell(null);\n      } else {\n        setShake(cellKey);\n        setTimeout(() => setShake(null), 500);\n        setSelectedCell(null);\n      }\n    }\n  };\n  const addRow = () => {\n    if (visibleRows < grid.length) {\n      setVisibleRows(Math.min(visibleRows + ROWS_TO_ADD, grid.length));\n    }\n  };\n  const resetGame = () => {\n    const config = LEVELS[level];\n    setGrid(generateGrid(config));\n    setMatchedCells(new Set());\n    setSelectedCell(null);\n    setScore(0);\n    setVisibleRows(INITIAL_VISIBLE_ROWS);\n  };\n  return {\n    grid,\n    selectedCell,\n    matchedCells,\n    score,\n    shake,\n    visibleRows,\n    handleCellClick,\n    addRow,\n    resetGame\n  };\n};\n_s(useGameLogic, \"cTLWysJtUSWJVg7tfDMtfPLIMto=\");","map":{"version":3,"names":["useState","useEffect","generateGrid","hasValidPath","canMatch","LEVELS","INITIAL_VISIBLE_ROWS","POINTS_PER_MATCH","ROWS_TO_ADD","useGameLogic","level","_s","grid","setGrid","selectedCell","setSelectedCell","matchedCells","setMatchedCells","Set","score","setScore","shake","setShake","visibleRows","setVisibleRows","config","_grid$","size","length","handleCellClick","row","col","value","has","cellKey","newMatched","add","setTimeout","addRow","Math","min","resetGame"],"sources":["C:/Users/varun s/Desktop/project/number-puzzle-game/src/hooks/useGameLogic.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { generateGrid } from '../utils/gridGenerator';\r\nimport { hasValidPath, canMatch } from '../utils/pathValidator';\r\nimport { LEVELS, INITIAL_VISIBLE_ROWS, POINTS_PER_MATCH, ROWS_TO_ADD } from '../utils/constants';\r\n\r\nexport const useGameLogic = (level) => {\r\n  const [grid, setGrid] = useState([]);\r\n  const [selectedCell, setSelectedCell] = useState(null);\r\n  const [matchedCells, setMatchedCells] = useState(new Set());\r\n  const [score, setScore] = useState(0);\r\n  const [shake, setShake] = useState(null);\r\n  const [visibleRows, setVisibleRows] = useState(INITIAL_VISIBLE_ROWS);\r\n\r\n  useEffect(() => {\r\n    const config = LEVELS[level];\r\n    setGrid(generateGrid(config));\r\n    setMatchedCells(new Set());\r\n    setSelectedCell(null);\r\n    setScore(0);\r\n    setVisibleRows(INITIAL_VISIBLE_ROWS);\r\n  }, [level]);\r\n\r\n  useEffect(() => {\r\n    if (matchedCells.size === grid.length * grid[0]?.length && grid.length > 0) {\r\n      return true; // Level won\r\n    }\r\n  }, [matchedCells, grid]);\r\n\r\n  const handleCellClick = (row, col, value) => {\r\n    if (matchedCells.has(`${row}-${col}`)) return;\r\n    if (row >= visibleRows) return;\r\n\r\n    const cellKey = `${row}-${col}`;\r\n\r\n    if (!selectedCell) {\r\n      setSelectedCell({ row, col, value });\r\n    } else {\r\n      if (selectedCell.row === row && selectedCell.col === col) {\r\n        setSelectedCell(null);\r\n        return;\r\n      }\r\n\r\n      if (canMatch(selectedCell.value, value) && hasValidPath(selectedCell, { row, col }, matchedCells, visibleRows, grid[0].length)) {\r\n        const newMatched = new Set(matchedCells);\r\n        newMatched.add(`${selectedCell.row}-${selectedCell.col}`);\r\n        newMatched.add(cellKey);\r\n        setMatchedCells(newMatched);\r\n        setScore(score + POINTS_PER_MATCH);\r\n        setSelectedCell(null);\r\n      } else {\r\n        setShake(cellKey);\r\n        setTimeout(() => setShake(null), 500);\r\n        setSelectedCell(null);\r\n      }\r\n    }\r\n  };\r\n\r\n  const addRow = () => {\r\n    if (visibleRows < grid.length) {\r\n      setVisibleRows(Math.min(visibleRows + ROWS_TO_ADD, grid.length));\r\n    }\r\n  };\r\n\r\n  const resetGame = () => {\r\n    const config = LEVELS[level];\r\n    setGrid(generateGrid(config));\r\n    setMatchedCells(new Set());\r\n    setSelectedCell(null);\r\n    setScore(0);\r\n    setVisibleRows(INITIAL_VISIBLE_ROWS);\r\n  };\r\n\r\n  return {\r\n    grid,\r\n    selectedCell,\r\n    matchedCells,\r\n    score,\r\n    shake,\r\n    visibleRows,\r\n    handleCellClick,\r\n    addRow,\r\n    resetGame\r\n  };\r\n};"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,SAASC,YAAY,QAAQ,wBAAwB;AACrD,SAASC,YAAY,EAAEC,QAAQ,QAAQ,wBAAwB;AAC/D,SAASC,MAAM,EAAEC,oBAAoB,EAAEC,gBAAgB,EAAEC,WAAW,QAAQ,oBAAoB;AAEhG,OAAO,MAAMC,YAAY,GAAIC,KAAK,IAAK;EAAAC,EAAA;EACrC,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGb,QAAQ,CAAC,EAAE,CAAC;EACpC,MAAM,CAACc,YAAY,EAAEC,eAAe,CAAC,GAAGf,QAAQ,CAAC,IAAI,CAAC;EACtD,MAAM,CAACgB,YAAY,EAAEC,eAAe,CAAC,GAAGjB,QAAQ,CAAC,IAAIkB,GAAG,CAAC,CAAC,CAAC;EAC3D,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGpB,QAAQ,CAAC,CAAC,CAAC;EACrC,MAAM,CAACqB,KAAK,EAAEC,QAAQ,CAAC,GAAGtB,QAAQ,CAAC,IAAI,CAAC;EACxC,MAAM,CAACuB,WAAW,EAAEC,cAAc,CAAC,GAAGxB,QAAQ,CAACM,oBAAoB,CAAC;EAEpEL,SAAS,CAAC,MAAM;IACd,MAAMwB,MAAM,GAAGpB,MAAM,CAACK,KAAK,CAAC;IAC5BG,OAAO,CAACX,YAAY,CAACuB,MAAM,CAAC,CAAC;IAC7BR,eAAe,CAAC,IAAIC,GAAG,CAAC,CAAC,CAAC;IAC1BH,eAAe,CAAC,IAAI,CAAC;IACrBK,QAAQ,CAAC,CAAC,CAAC;IACXI,cAAc,CAAClB,oBAAoB,CAAC;EACtC,CAAC,EAAE,CAACI,KAAK,CAAC,CAAC;EAEXT,SAAS,CAAC,MAAM;IAAA,IAAAyB,MAAA;IACd,IAAIV,YAAY,CAACW,IAAI,KAAKf,IAAI,CAACgB,MAAM,KAAAF,MAAA,GAAGd,IAAI,CAAC,CAAC,CAAC,cAAAc,MAAA,uBAAPA,MAAA,CAASE,MAAM,KAAIhB,IAAI,CAACgB,MAAM,GAAG,CAAC,EAAE;MAC1E,OAAO,IAAI,CAAC,CAAC;IACf;EACF,CAAC,EAAE,CAACZ,YAAY,EAAEJ,IAAI,CAAC,CAAC;EAExB,MAAMiB,eAAe,GAAGA,CAACC,GAAG,EAAEC,GAAG,EAAEC,KAAK,KAAK;IAC3C,IAAIhB,YAAY,CAACiB,GAAG,CAAC,GAAGH,GAAG,IAAIC,GAAG,EAAE,CAAC,EAAE;IACvC,IAAID,GAAG,IAAIP,WAAW,EAAE;IAExB,MAAMW,OAAO,GAAG,GAAGJ,GAAG,IAAIC,GAAG,EAAE;IAE/B,IAAI,CAACjB,YAAY,EAAE;MACjBC,eAAe,CAAC;QAAEe,GAAG;QAAEC,GAAG;QAAEC;MAAM,CAAC,CAAC;IACtC,CAAC,MAAM;MACL,IAAIlB,YAAY,CAACgB,GAAG,KAAKA,GAAG,IAAIhB,YAAY,CAACiB,GAAG,KAAKA,GAAG,EAAE;QACxDhB,eAAe,CAAC,IAAI,CAAC;QACrB;MACF;MAEA,IAAIX,QAAQ,CAACU,YAAY,CAACkB,KAAK,EAAEA,KAAK,CAAC,IAAI7B,YAAY,CAACW,YAAY,EAAE;QAAEgB,GAAG;QAAEC;MAAI,CAAC,EAAEf,YAAY,EAAEO,WAAW,EAAEX,IAAI,CAAC,CAAC,CAAC,CAACgB,MAAM,CAAC,EAAE;QAC9H,MAAMO,UAAU,GAAG,IAAIjB,GAAG,CAACF,YAAY,CAAC;QACxCmB,UAAU,CAACC,GAAG,CAAC,GAAGtB,YAAY,CAACgB,GAAG,IAAIhB,YAAY,CAACiB,GAAG,EAAE,CAAC;QACzDI,UAAU,CAACC,GAAG,CAACF,OAAO,CAAC;QACvBjB,eAAe,CAACkB,UAAU,CAAC;QAC3Bf,QAAQ,CAACD,KAAK,GAAGZ,gBAAgB,CAAC;QAClCQ,eAAe,CAAC,IAAI,CAAC;MACvB,CAAC,MAAM;QACLO,QAAQ,CAACY,OAAO,CAAC;QACjBG,UAAU,CAAC,MAAMf,QAAQ,CAAC,IAAI,CAAC,EAAE,GAAG,CAAC;QACrCP,eAAe,CAAC,IAAI,CAAC;MACvB;IACF;EACF,CAAC;EAED,MAAMuB,MAAM,GAAGA,CAAA,KAAM;IACnB,IAAIf,WAAW,GAAGX,IAAI,CAACgB,MAAM,EAAE;MAC7BJ,cAAc,CAACe,IAAI,CAACC,GAAG,CAACjB,WAAW,GAAGf,WAAW,EAAEI,IAAI,CAACgB,MAAM,CAAC,CAAC;IAClE;EACF,CAAC;EAED,MAAMa,SAAS,GAAGA,CAAA,KAAM;IACtB,MAAMhB,MAAM,GAAGpB,MAAM,CAACK,KAAK,CAAC;IAC5BG,OAAO,CAACX,YAAY,CAACuB,MAAM,CAAC,CAAC;IAC7BR,eAAe,CAAC,IAAIC,GAAG,CAAC,CAAC,CAAC;IAC1BH,eAAe,CAAC,IAAI,CAAC;IACrBK,QAAQ,CAAC,CAAC,CAAC;IACXI,cAAc,CAAClB,oBAAoB,CAAC;EACtC,CAAC;EAED,OAAO;IACLM,IAAI;IACJE,YAAY;IACZE,YAAY;IACZG,KAAK;IACLE,KAAK;IACLE,WAAW;IACXM,eAAe;IACfS,MAAM;IACNG;EACF,CAAC;AACH,CAAC;AAAC9B,EAAA,CA9EWF,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}